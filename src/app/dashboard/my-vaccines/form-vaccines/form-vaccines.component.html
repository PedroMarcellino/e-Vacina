<h2 mat-dialog-title>{{ cardTitle }}</h2>

<mat-dialog-content>
  <form [formGroup]="form" class="form-container" (keydown.enter)="handleEnter($any($event))">
    <div *ngFor="let label of formLabels" class="form-field">

      <div *ngIf="label.fieldtype === 'select'; else textField">
        <mat-label class="ng-label">{{ label.label }} *</mat-label>

        <ng-select class="ng-select-custom"
          [items]="label.options"
          [formControlName]="label.control"
          [placeholder]="label.placeholder"
          [searchable]="false"
          [clearable]="true">
        </ng-select>

        
        <mat-error *ngIf="form.get(label.control)?.hasError('required') && form.get(label.control)?.touched">
          Campo obrigatório
        </mat-error>
      </div>

      <ng-template #textField>
        <label class="ng-label">{{ label.label }} *</label>
        <input
          class="ng-input"
          [type]="label.type || 'text'"
          [formControlName]="label.control"
          [placeholder]="label.placeholder" />

        
        <mat-error *ngIf="form.get(label.control)?.hasError('required') && form.get(label.control)?.touched">
          Campo obrigatório
        </mat-error>
      </ng-template>

    </div>

    <mat-dialog-actions align="end">
      <button mat-button (click)="dialogRef.close()">Cancelar</button>
      <button mat-raised-button color="primary" (click)="save()" [disabled]="form.invalid">
        Salvar
      </button>
    </mat-dialog-actions>
  </form>
</mat-dialog-content>
